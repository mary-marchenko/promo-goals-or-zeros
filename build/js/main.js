"use strict";

// 3D anim
var cards = document.querySelectorAll(".team, .animCard, .animRight"); // Добавляем .animRight
var angle = 0;
function animateCards() {
  angle += 0.9; // Скорость движения
  var rotateX = Math.sin(angle * (Math.PI / 180)) * 10; // Колебание по X
  var rotateY = Math.cos(angle * (Math.PI / 180)) * 10; // Колебание по Y

  cards.forEach(function (card) {
    if (card.classList.contains("animRight")) {
      // Для .animRight меняем направление вращения
      card.style.transform = "rotateY(".concat(-rotateY, "deg) rotateX(").concat(-rotateX, "deg)");
    } else {
      card.style.transform = "rotateY(".concat(rotateY, "deg) rotateX(").concat(rotateX, "deg)");
    }
  });
  requestAnimationFrame(animateCards);
}
animateCards();

// predict tabs
document.addEventListener("DOMContentLoaded", function () {
  var tabs = document.querySelectorAll('.predict__tabs-global > div, .predict__tabs-dates > div');
  var containers = document.querySelectorAll('.predict__container');
  function handleTabClick(event) {
    var clickedTab = event.target;
    var tabPair = clickedTab.closest('.predict__tabs-global') || clickedTab.closest('.predict__tabs-dates');
    if (clickedTab.classList.contains('active')) return;
    if (tabPair) {
      var pair = tabPair.querySelectorAll('.active');
      if (pair.length > 0) {
        pair[0].classList.remove('active');
      }
    }
    clickedTab.classList.add('active');
    updateContainers();
  }
  function updateContainers() {
    containers.forEach(function (container) {
      return container.classList.remove('active');
    });
    if (document.querySelector('.predict__tabs-score.active') && document.querySelector('.predict__tabs-date.date1.active')) {
      document.querySelector('.predict__container.score-1').classList.add('active');
    } else if (document.querySelector('.predict__tabs-score.active') && document.querySelector('.predict__tabs-date.date2.active')) {
      document.querySelector('.predict__container.score-2').classList.add('active');
    } else if (document.querySelector('.predict__tabs-goal.active') && document.querySelector('.predict__tabs-date.date1.active')) {
      document.querySelector('.predict__container.goal-1').classList.add('active');
    } else if (document.querySelector('.predict__tabs-goal.active') && document.querySelector('.predict__tabs-date.date2.active')) {
      document.querySelector('.predict__container.goal-2').classList.add('active');
    }
  }
  tabs.forEach(function (tab) {
    return tab.addEventListener('click', handleTabClick);
  });
  updateContainers();
});

//score
document.querySelectorAll('.predict__team-increase').forEach(function (button) {
  button.addEventListener('click', function () {
    var teamControl = this.closest('.predict__team-control');
    var teamNumber = teamControl.querySelector('.predict__team-number');
    var value = parseInt(teamNumber.textContent);
    teamNumber.textContent = value + 1;
  });
});
document.querySelectorAll('.predict__team-decrease').forEach(function (button) {
  button.addEventListener('click', function () {
    var teamControl = this.closest('.predict__team-control');
    var teamNumber = teamControl.querySelector('.predict__team-number');
    var value = parseInt(teamNumber.textContent);
    if (value > 0) {
      teamNumber.textContent = value - 1;
    }
  });
});

//table tabs
document.querySelectorAll('.table__tabs-date').forEach(function (tab) {
  tab.addEventListener('click', function () {
    if (this.classList.contains('active')) {
      return;
    }
    document.querySelectorAll('.table__tabs-date').forEach(function (tab) {
      return tab.classList.remove('active');
    });
    this.classList.add('active');
    document.querySelectorAll('.table__body').forEach(function (content) {
      return content.classList.remove('active');
    });
    var bodyClass = this.classList.contains('date1') ? '.table__body.table1' : '.table__body.table2';
    document.querySelector(bodyClass).classList.add('active');
  });
});

//popups

function setPopups(triggerButtons, popupClass) {
  var popupsContainer = document.querySelector('.popups');
  var popup = document.querySelector(".popups__item.".concat(popupClass));
  if (!triggerButtons || !popup || !popupsContainer) return;
  triggerButtons.forEach(function (triggerButton) {
    triggerButton.addEventListener('click', function () {
      popupsContainer.classList.remove('_opacity');
      popupsContainer.classList.add(popupClass);
      document.body.style.overflow = 'hidden';
    });
  });
  var closeButton = popup.querySelector('.popups__item-close');
  var btnClose = popup.querySelector('.btn-close');
  popupsContainer.addEventListener("click", function (e) {
    if (e.target === popupsContainer || e.target === closeButton || e.target === btnClose) {
      closePopup();
    }
  });
  function closePopup() {
    popupsContainer.classList.add('_opacity');
    popupsContainer.classList.remove(popupClass);
    document.body.style.overflow = '';
  }
}
setPopups(document.querySelectorAll('.gide__list-btn'), 'gidePopup');
setPopups(document.querySelectorAll('.predict__btn'), '_confirmPopup');

// TEST
document.querySelector('.dark-btn').addEventListener('click', function () {
  document.body.classList.toggle('dark');
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiY2FyZHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhbmdsZSIsImFuaW1hdGVDYXJkcyIsInJvdGF0ZVgiLCJNYXRoIiwic2luIiwiUEkiLCJyb3RhdGVZIiwiY29zIiwiZm9yRWFjaCIsImNhcmQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInN0eWxlIiwidHJhbnNmb3JtIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhYnMiLCJjb250YWluZXJzIiwiaGFuZGxlVGFiQ2xpY2siLCJldmVudCIsImNsaWNrZWRUYWIiLCJ0YXJnZXQiLCJ0YWJQYWlyIiwiY2xvc2VzdCIsInBhaXIiLCJsZW5ndGgiLCJyZW1vdmUiLCJhZGQiLCJ1cGRhdGVDb250YWluZXJzIiwiY29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsInRhYiIsImJ1dHRvbiIsInRlYW1Db250cm9sIiwidGVhbU51bWJlciIsInZhbHVlIiwicGFyc2VJbnQiLCJ0ZXh0Q29udGVudCIsImNvbnRlbnQiLCJib2R5Q2xhc3MiLCJzZXRQb3B1cHMiLCJ0cmlnZ2VyQnV0dG9ucyIsInBvcHVwQ2xhc3MiLCJwb3B1cHNDb250YWluZXIiLCJwb3B1cCIsInRyaWdnZXJCdXR0b24iLCJib2R5Iiwib3ZlcmZsb3ciLCJjbG9zZUJ1dHRvbiIsImJ0bkNsb3NlIiwiZSIsImNsb3NlUG9wdXAiLCJ0b2dnbGUiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQSxJQUFNQSxLQUFLLEdBQUdDLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsOEJBQThCLENBQUMsQ0FBQyxDQUFDO0FBQ3pFLElBQUlDLEtBQUssR0FBRyxDQUFDO0FBRWIsU0FBU0MsWUFBWSxHQUFHO0VBQ3BCRCxLQUFLLElBQUksR0FBRyxDQUFDLENBQUM7RUFDZCxJQUFNRSxPQUFPLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDSixLQUFLLElBQUlHLElBQUksQ0FBQ0Us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RztJQUNsQlIsZUFBZSxDQUFDakMsU0FBUyxDQUFDaUIsR0FBRyxDQUFDLFVBQVUsQ0FBQztJQUN6Q2dCLGVBQWUsQ0FBQ2pDLFNBQVMsQ0FBQ2dCLE1BQU0sQ0FBQ2dCLFVBQVUsQ0FBQztJQUM1QzVDLFFBQVEsQ0FBQ2dELElBQUksQ0FBQ2xDLEtBQUssQ0FBQ21DLFFBQVEsR0FBRyxFQUFFO0VBQ3JDO0FBQ0o7QUFFQVAsU0FBUyxDQUFDMUMsUUFBUSxDQUFDQyxnQkFBZ0IsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLFdBQVcsQ0FBQztBQUNwRXlDLFNBQVMsQ0FBQzFDLFFBQVEsQ0FBQ0MsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLEVBQUUsZUFBZSxDQUFDOztBQUV0RTtBQUNBRCxRQUFRLENBQUNnQyxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUNmLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxZQUFNO0VBQ2hFakIsUUFBUSxDQUFDZ0QsSUFBSSxDQUFDcEMsU0FBUyxDQUFDMEMsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUMxQyxDQUFDLENBQUMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIDNEIGFuaW1cbmNvbnN0IGNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50ZWFtLCAuYW5pbUNhcmQsIC5hbmltUmlnaHRcIik7IC8vINCU0L7QsdCw0LLQu9GP0LXQvCAuYW5pbVJpZ2h0XG5sZXQgYW5nbGUgPSAwO1xuXG5mdW5jdGlvbiBhbmltYXRlQ2FyZHMoKSB7XG4gICAgYW5nbGUgKz0gMC45OyAvLyDQodC60L7RgNC+0YHRgtGMINC00LLQuNC20LXQvdC40Y9cbiAgICBjb25zdCByb3RhdGVYID0gTWF0aC5zaW4oYW5nbGUgKiAoTWF0aC5QSSAvIDE4MCkpICogMTA7IC8vINCa0L7Qu9C10LHQsNC90LjQtSDQv9C+IFhcbiAgICBjb25zdCByb3RhdGVZID0gTWF0aC5jb3MoYW5nbGUgKiAoTWF0aC5QSSAvIDE4MCkpICogMTA7IC8vINCa0L7Qu9C10LHQsNC90LjQtSDQv9C+IFlcblxuICAgIGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucyhcImFuaW1SaWdodFwiKSkge1xuICAgICAgICAgICAgLy8g0JTQu9GPIC5hbmltUmlnaHQg0LzQtdC90Y/QtdC8INC90LDQv9GA0LDQstC70LXQvdC40LUg0LLRgNCw0YnQtdC90LjRj1xuICAgICAgICAgICAgY2FyZC5zdHlsZS50cmFuc2Zvcm0gPSBgcm90YXRlWSgkey1yb3RhdGVZfWRlZykgcm90YXRlWCgkey1yb3RhdGVYfWRlZylgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FyZC5zdHlsZS50cmFuc2Zvcm0gPSBgcm90YXRlWSgke3JvdGF0ZVl9ZGVnKSByb3RhdGVYKCR7cm90YXRlWH1kZWcpYDtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGVDYXJkcyk7XG59XG5hbmltYXRlQ2FyZHMoKTtcblxuLy8gcHJlZGljdCB0YWJzXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbigpIHtcblxuICAgIGNvbnN0IHRhYnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJlZGljdF9fdGFicy1nbG9iYWwgPiBkaXYsIC5wcmVkaWN0X190YWJzLWRhdGVzID4gZGl2Jyk7XG4gICAgY29uc3QgY29udGFpbmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcmVkaWN0X19jb250YWluZXInKTtcblxuICAgIGZ1bmN0aW9uIGhhbmRsZVRhYkNsaWNrKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGNsaWNrZWRUYWIgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIGNvbnN0IHRhYlBhaXIgPSBjbGlja2VkVGFiLmNsb3Nlc3QoJy5wcmVkaWN0X190YWJzLWdsb2JhbCcpIHx8IGNsaWNrZWRUYWIuY2xvc2VzdCgnLnByZWRpY3RfX3RhYnMtZGF0ZXMnKTtcblxuICAgICAgICBpZiAoY2xpY2tlZFRhYi5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSByZXR1cm47XG4gICAgICAgIGlmICh0YWJQYWlyKSB7XG4gICAgICAgICAgICBjb25zdCBwYWlyID0gdGFiUGFpci5xdWVyeVNlbGVjdG9yQWxsKCcuYWN0aXZlJyk7XG4gICAgICAgICAgICBpZiAocGFpci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcGFpclswXS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNsaWNrZWRUYWIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIHVwZGF0ZUNvbnRhaW5lcnMoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVDb250YWluZXJzKCkge1xuICAgICAgICBjb250YWluZXJzLmZvckVhY2goY29udGFpbmVyID0+IGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XG5cbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVkaWN0X190YWJzLXNjb3JlLmFjdGl2ZScpICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVkaWN0X190YWJzLWRhdGUuZGF0ZTEuYWN0aXZlJykpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVkaWN0X19jb250YWluZXIuc2NvcmUtMScpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVkaWN0X190YWJzLXNjb3JlLmFjdGl2ZScpICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVkaWN0X190YWJzLWRhdGUuZGF0ZTIuYWN0aXZlJykpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVkaWN0X19jb250YWluZXIuc2NvcmUtMicpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVkaWN0X190YWJzLWdvYWwuYWN0aXZlJykgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZWRpY3RfX3RhYnMtZGF0ZS5kYXRlMS5hY3RpdmUnKSkge1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZWRpY3RfX2NvbnRhaW5lci5nb2FsLTEnKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJlZGljdF9fdGFicy1nb2FsLmFjdGl2ZScpICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVkaWN0X190YWJzLWRhdGUuZGF0ZTIuYWN0aXZlJykpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmVkaWN0X19jb250YWluZXIuZ29hbC0yJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0YWJzLmZvckVhY2godGFiID0+IHRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVRhYkNsaWNrKSk7XG5cbiAgICB1cGRhdGVDb250YWluZXJzKCk7XG59KTtcblxuLy9zY29yZVxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByZWRpY3RfX3RlYW0taW5jcmVhc2UnKS5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHRlYW1Db250cm9sID0gdGhpcy5jbG9zZXN0KCcucHJlZGljdF9fdGVhbS1jb250cm9sJyk7XG4gICAgICAgIGNvbnN0IHRlYW1OdW1iZXIgPSB0ZWFtQ29udHJvbC5xdWVyeVNlbGVjdG9yKCcucHJlZGljdF9fdGVhbS1udW1iZXInKTtcbiAgICAgICAgbGV0IHZhbHVlID0gcGFyc2VJbnQodGVhbU51bWJlci50ZXh0Q29udGVudCk7XG4gICAgICAgIHRlYW1OdW1iZXIudGV4dENvbnRlbnQgPSB2YWx1ZSArIDE7XG4gICAgfSk7XG59KTtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByZWRpY3RfX3RlYW0tZGVjcmVhc2UnKS5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHRlYW1Db250cm9sID0gdGhpcy5jbG9zZXN0KCcucHJlZGljdF9fdGVhbS1jb250cm9sJyk7XG4gICAgICAgIGNvbnN0IHRlYW1OdW1iZXIgPSB0ZWFtQ29udHJvbC5xdWVyeVNlbGVjdG9yKCcucHJlZGljdF9fdGVhbS1udW1iZXInKTtcbiAgICAgICAgbGV0IHZhbHVlID0gcGFyc2VJbnQodGVhbU51bWJlci50ZXh0Q29udGVudCk7XG4gICAgICAgIGlmICh2YWx1ZSA+IDApIHtcbiAgICAgICAgICAgIHRlYW1OdW1iZXIudGV4dENvbnRlbnQgPSB2YWx1ZSAtIDE7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG4vL3RhYmxlIHRhYnNcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWJsZV9fdGFicy1kYXRlJykuZm9yRWFjaCh0YWIgPT4ge1xuICAgIHRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFibGVfX3RhYnMtZGF0ZScpLmZvckVhY2godGFiID0+IHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XG5cbiAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFibGVfX2JvZHknKS5mb3JFYWNoKGNvbnRlbnQgPT4gY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XG5cbiAgICAgICAgY29uc3QgYm9keUNsYXNzID0gdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2RhdGUxJykgPyAnLnRhYmxlX19ib2R5LnRhYmxlMScgOiAnLnRhYmxlX19ib2R5LnRhYmxlMic7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYm9keUNsYXNzKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9KTtcbn0pO1xuXG4vL3BvcHVwc1xuXG5mdW5jdGlvbiBzZXRQb3B1cHModHJpZ2dlckJ1dHRvbnMsIHBvcHVwQ2xhc3MpIHtcbiAgICBjb25zdCBwb3B1cHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBzJyk7XG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAucG9wdXBzX19pdGVtLiR7cG9wdXBDbGFzc31gKTtcblxuICAgIGlmICghdHJpZ2dlckJ1dHRvbnMgfHwgIXBvcHVwIHx8ICFwb3B1cHNDb250YWluZXIpIHJldHVybjtcblxuICAgIHRyaWdnZXJCdXR0b25zLmZvckVhY2godHJpZ2dlckJ1dHRvbiA9PiB7XG4gICAgICAgIHRyaWdnZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBwb3B1cHNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSgnX29wYWNpdHknKTtcbiAgICAgICAgICAgIHBvcHVwc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKHBvcHVwQ2xhc3MpO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwc19faXRlbS1jbG9zZScpO1xuICAgIGNvbnN0IGJ0bkNsb3NlID0gcG9wdXAucXVlcnlTZWxlY3RvcignLmJ0bi1jbG9zZScpO1xuXG4gICAgcG9wdXBzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQgPT09IHBvcHVwc0NvbnRhaW5lciB8fCBlLnRhcmdldCA9PT0gY2xvc2VCdXR0b24gfHwgZS50YXJnZXQgPT09IGJ0bkNsb3NlKSB7XG4gICAgICAgICAgICBjbG9zZVBvcHVwKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGNsb3NlUG9wdXAoKSB7XG4gICAgICAgIHBvcHVwc0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdfb3BhY2l0eScpO1xuICAgICAgICBwb3B1cHNDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShwb3B1cENsYXNzKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuICAgIH1cbn1cblxuc2V0UG9wdXBzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5naWRlX19saXN0LWJ0bicpLCAnZ2lkZVBvcHVwJyk7XG5zZXRQb3B1cHMoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByZWRpY3RfX2J0bicpLCAnX2NvbmZpcm1Qb3B1cCcpO1xuXG4vLyBURVNUXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGFyay1idG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ2RhcmsnKTtcbn0pOyJdfQ==
